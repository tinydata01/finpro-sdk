!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/forms"),require("rxjs"),require("rxjs/operators"),require("@angular/common")):"function"==typeof define&&define.amd?define("angular-otp-box",["exports","@angular/core","@angular/forms","rxjs","rxjs/operators","@angular/common"],e):e((t=t||self)["angular-otp-box"]={},t.ng.core,t.ng.forms,t.rxjs,t.rxjs.operators,t.ng.common)}(this,function(t,e,n,o,r,i){"use strict";var s=function(){function t(){}return t.prototype.transform=function(t){return Object.keys(t)},t.decorators=[{type:e.Pipe,args:[{name:"keys"}]}],t}();var u=function(){function t(){var t=this;this._counterSource$=new o.Subject,this._subscription=o.Subscription.EMPTY,this.interval=1e3,this.value=new e.EventEmitter,this._subscription=this._counterSource$.pipe(r.switchMap(function(e){var n=e.interval,i=e.count;return o.timer(0,n).pipe(r.take(i),r.tap(function(){return t.value.emit(--i)}))})).subscribe()}return t.prototype.ngOnChanges=function(t){this.startTimer()},t.prototype.startTimer=function(){this._counterSource$.next({count:this.counter,interval:this.interval})},t.prototype.ngOnDestroy=function(){this._subscription.unsubscribe()},t.decorators=[{type:e.Directive,args:[{selector:"[counter]"}]}],t.ctorParameters=function(){return[]},t.propDecorators={counter:[{type:e.Input}],value:[{type:e.Output}]},t}();var p=function(){function t(t){this.keysPipe=t,this.setting={length:4,timer:0},this.onValueChange=new e.EventEmitter,this.inputControls=new Array(this.setting.length),this.componentKey=Math.random().toString(36).substring(2)+(new Date).getTime().toString(36)}return t.prototype.ngOnInit=function(){this.otpForm=new n.FormGroup({});for(var t=0;t<this.setting.length;t++)this.otpForm.addControl(this.getControlName(t),new n.FormControl)},t.prototype.ngAfterViewInit=function(){var t=document.getElementById("c_"+this.componentKey);if(t){var e=t.getElementsByClassName(".otp-input")[0];e&&e.focus&&e.focus()}},t.prototype.getControlName=function(t){return"ctrl_"+t},t.prototype.isLeftArrow=function(t){return this.isKeyCode(t,37)},t.prototype.isRightArrow=function(t){return this.isKeyCode(t,39)},t.prototype.isBackspaceOrDelete=function(t){return"Backspace"===t.key||"Delete"===t.key||this.isKeyCode(t,8)||this.isKeyCode(t,46)},t.prototype.isKeyCode=function(t,e){return(t.keyCode||t.charCode)==e},t.prototype.keyUp=function(t,e){var n=this.appendKey("otp_"+(e+1)),o=this.appendKey("otp_"+(e-1));if(this.isRightArrow(t))this.setSelected(n);else if(this.isLeftArrow(t))this.setSelected(o);else{if(this.isBackspaceOrDelete(t)&&!t.target.value)return this.setSelected(o),void this.rebuildValue();t.target.value&&(this.isValidEntry(t)&&this.focusTo(n),this.rebuildValue())}},t.prototype.appendKey=function(t){return t+"_"+this.componentKey},t.prototype.setSelected=function(t){this.focusTo(t);var e=document.getElementById(t);e&&e.setSelectionRange&&setTimeout(function(){e.setSelectionRange(0,1)},0)},t.prototype.isValidEntry=function(t){var e=String.fromCharCode(t.keyCode);return/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)||/[a-zA-Z0-9-_]/.test(e)||this.setting.allowKeyCodes&&this.setting.allowKeyCodes.includes(t.keyCode)||t.keyCode>=96&&t.keyCode<=105},t.prototype.focusTo=function(t){var e=document.getElementById(t);e&&(e.focus(),e.selectionStart=e.selectionEnd=100)},t.prototype.rebuildValue=function(){var t=this,e="";this.keysPipe.transform(this.otpForm.controls).forEach(function(n){t.otpForm.controls[n].value&&(e+=t.otpForm.controls[n].value)}),this.onValueChange.emit(e)},t.prototype.onCounterChange=function(t){this.counter=t,0==this.counter&&this.onValueChange.emit(-1)},t.prototype.ressendOtp=function(){this.CounterDirective.first.startTimer(),this.onValueChange.emit(-2)},t.decorators=[{type:e.Component,args:[{selector:"otp",template:'<div class="otp-container {{setting.wrapperClass}}" id="c_{{componentKey}}" *ngIf="otpForm?.controls"\n    [ngStyle]="setting.wrapperStyles">\n    <input \n        [type]="setting.numbersOnly ? \'tel\' : \'text\'" \n        numberOnly [disabledNumberOnly]="!setting.numbersOnly"\n        [ngStyle]="setting.inputStyles" \n        maxlength="1" \n        class="otp-input {{setting.inputClass}}" \n        autocomplete="off"\n        *ngFor="let item of otpForm?.controls | keys; let i = index" \n        [formControl]="otpForm.controls[item]"\n        id="otp_{{i}}_{{componentKey}}" \n        (keyup)="keyUp($event, i)"\n    >\n    <ng-container counter [counter]="setting.timer" (value)="onCounterChange($event)">\n        <div>\n            <button class="btn {{setting.btnClass}}" [disabled]="counter != 0" (click)="ressendOtp()">\n                Resend OTP <span *ngIf="counter != 0">in {{ counter }} seconds.</span>\n            </button>\n        </div>\n    </ng-container>\n</div>',styles:[".otp-input{width:2em;height:2em;border-radius:4px;border:1px solid #c5c5c5;text-align:center;font-size:28px}.otp-input:focus{outline-offset:0;outline:#2b91e2 auto 5px}.otp-container .otp-input:not(:last-child){margin-right:8px}@media screen and (max-width:767px){.otp-input{font-size:24px}}@media screen and (max-width:420px){.otp-input{font-size:18px}}"]}]}],t.ctorParameters=function(){return[{type:s}]},t.propDecorators={setting:[{type:e.Input}],onValueChange:[{type:e.Output}],CounterDirective:[{type:e.ViewChildren,args:[u]}]},t}();var a=function(){function t(t,e){this._elRef=t,this._renderer=e}return t.prototype.ngOnInit=function(){this.disabledNumberOnly||this._renderer.setAttribute(this._elRef.nativeElement,"onkeypress","return (event.charCode >= 48 && event.charCode <= 57) || event.charCode == 0")},t.decorators=[{type:e.Directive,args:[{selector:"[numberOnly]"}]}],t.ctorParameters=function(){return[{type:e.ElementRef},{type:e.Renderer2}]},t.propDecorators={disabledNumberOnly:[{type:e.Input}]},t}();var c=function(){function t(){}return t.decorators=[{type:e.NgModule,args:[{declarations:[p,s,a,u],imports:[i.CommonModule,n.FormsModule,n.ReactiveFormsModule],exports:[p],providers:[s]}]}],t}();t.AngularOtpLibModule=c,t.OtpInputComponent=p,t.ɵa=u,t.ɵb=s,t.ɵc=a,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=angular-otp-box.umd.min.js.map