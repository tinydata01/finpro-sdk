{"version":3,"file":"angular-otp-box.umd.js","sources":["ng://angular-otp-box/lib/pipes/keys.pipe.ts","ng://angular-otp-box/lib/models/setting.ts","ng://angular-otp-box/lib/directives/timer.directive.ts","ng://angular-otp-box/lib/components/angular-otp-input.component.ts","ng://angular-otp-box/lib/directives/numberOnly.directive.ts","ng://angular-otp-box/lib/angular-otp-box.module.ts"],"sourcesContent":["import { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n\tname: 'keys'\n})\nexport class KeysPipe implements PipeTransform {\n\ttransform(value: any): string[] {\n\t\treturn Object.keys(value)\n\t}\n}","export class Setting {\n    inputStyles?: { [key: string]: any };\n    wrapperStyles?: { [key: string]: any };\n    allowKeyCodes?: string[];\n    length: number;\n    numbersOnly?: boolean;\n    inputClass?: string;\n    wrapperClass?: string;\n    timer?: number;\n    btnClass?: string;\n}","import { Directive, Input, Output, EventEmitter, OnChanges, OnDestroy, SimpleChanges } from '@angular/core';\n\nimport { Subject, Observable, Subscription, timer } from 'rxjs';\nimport { switchMap, take, tap } from 'rxjs/operators';\n\n@Directive({\n    selector: '[counter]'\n})\nexport class CounterDirective implements OnChanges, OnDestroy {\n    private _counterSource$ = new Subject<any>();\n    private _subscription = Subscription.EMPTY;\n\n    @Input() counter: number;\n    interval: number = 1000;\n    @Output() value = new EventEmitter<number>();\n\n    constructor() {\n        this._subscription = this._counterSource$.pipe(\n            switchMap(({ interval, count }) =>\n                timer(0, interval).pipe(\n                    take(count),\n                    tap(() => this.value.emit(--count))\n                )\n            )\n        ).subscribe();\n    }\n\n    ngOnChanges(changes: SimpleChanges): void {\n        this.startTimer();\n    }\n\n    public startTimer() {\n        this._counterSource$.next({ count: this.counter, interval: this.interval });\n    }\n\n    ngOnDestroy(): void {\n        this._subscription.unsubscribe();\n    }\n}","import { Component, OnInit, Input, Output, EventEmitter, ViewChildren } from '@angular/core';\nimport { FormGroup, FormControl } from '@angular/forms';\nimport { KeysPipe } from '../pipes/keys.pipe';\nimport { Setting } from '../models/setting';\nimport { CounterDirective } from '../directives/timer.directive';\n\n@Component({\n\tselector: 'otp',\n\ttemplateUrl: './angular-otp-input.component.html',\n\tstyleUrls: ['./angular-otp-input.component.scss']\n})\n\nexport class OtpInputComponent implements OnInit {\n\t@Input() setting: Setting = { \n\t\tlength: 4, \n\t\ttimer: 0\n\t};\n\t@Output() onValueChange = new EventEmitter<any>();\n\t@ViewChildren(CounterDirective) CounterDirective;\n\totpForm: FormGroup;\n\tinputControls: FormControl[] = new Array(this.setting.length);\n\tcomponentKey = Math.random().toString(36).substring(2) + (new Date()).getTime().toString(36);\n\tpublic counter: number;\n\t\n\tconstructor(private keysPipe: KeysPipe) {}\n\n\tpublic ngOnInit(): void {\n\t\tthis.otpForm = new FormGroup({})\n\t\tfor (let index = 0; index < this.setting.length; index++) {\n\t\t\tthis.otpForm.addControl(this.getControlName(index), new FormControl())\n\t\t}\n\t}\n\t\n\tpublic ngAfterViewInit(): void {\n\t\tlet containerItem = document.getElementById(`c_${this.componentKey}`);\n\t\tif (containerItem) {\n\t\t\tlet ele: any = containerItem.getElementsByClassName('.otp-input')[0]\n\t\t\tif (ele && ele.focus) {\n\t\t\t\tele.focus();\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate getControlName(idx) {\n\t\treturn `ctrl_${idx}`;\n\t}\n\n\tisLeftArrow(e) {\n\t\treturn this.isKeyCode(e, 37);\n\t}\n\n\tisRightArrow(e) {\n\t\treturn this.isKeyCode(e, 39);\n\t}\n\n\tisBackspaceOrDelete(e) {\n\t\treturn e.key === \"Backspace\" || e.key === \"Delete\" || this.isKeyCode(e, 8) || this.isKeyCode(e, 46);\n\t}\n\n\tisKeyCode(e, targetCode) {\n\t\tvar key = e.keyCode || e.charCode;\n\t\tif(key == targetCode) { return true; }\n\t\treturn false;\n\t}\n\n\tkeyUp(e, inputIdx: number) {\n\t\tlet nextInputId = this.appendKey(`otp_${inputIdx + 1}`);\n\t\tlet prevInputId = this.appendKey(`otp_${inputIdx - 1}`);\n\t\tif (this.isRightArrow(e)) {\n\t\t\tthis.setSelected(nextInputId);\n\t\t\treturn;\n\t\t}\n\t\tif (this.isLeftArrow(e)) {\n\t\t\tthis.setSelected(prevInputId);\n\t\t\treturn;\n\t\t}\n\t\tlet isBackspace = this.isBackspaceOrDelete(e);\n\t\tif (isBackspace && !e.target.value) {\n\t\t\tthis.setSelected(prevInputId);\n\t\t\tthis.rebuildValue();\n\t\t\treturn;\n\t\t}\n\t\tif (!e.target.value) {\n\t\t\treturn;\n\t\t}\n\t\tif (this.isValidEntry(e)) {\n\t\t\tthis.focusTo(nextInputId);\n\t\t}\n\t\tthis.rebuildValue();\n\t}\n\n\tappendKey(id) {\n\t\treturn `${id}_${this.componentKey}`;\n\t}\n\n\tsetSelected(eleId) {\n\t\tthis.focusTo(eleId);\n\t\tlet ele: any = document.getElementById(eleId);\n\t\tif (ele && ele.setSelectionRange) {\n\t\t\tsetTimeout(() => {\n\t\t\t\tele.setSelectionRange(0, 1);\n\t\t\t}, 0);\n\t\t}\n\t}\n\n\tisValidEntry(e) {\n\t\tvar inp = String.fromCharCode(e.keyCode);\n\t\tvar isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);\n\t\treturn isMobile || /[a-zA-Z0-9-_]/.test(inp) || (this.setting.allowKeyCodes && this.setting.allowKeyCodes.includes(e.keyCode)) || (e.keyCode >= 96 && e.keyCode <= 105);\n\t}\n\n\tfocusTo(eleId) {\n\t\tlet ele: any = document.getElementById(eleId);\n\t\tif (ele) {\n\t\t\tele.focus();\n\t\t\tele.selectionStart = ele.selectionEnd = 100;\n\t\t}\n\t}\n\n\trebuildValue() {\n\t\tlet val = '';\n\t\tthis.keysPipe.transform(this.otpForm.controls).forEach(k => {\n\t\t\tif (this.otpForm.controls[k].value) {\n\t\t\t\tval += this.otpForm.controls[k].value;\n\t\t\t}\n\t\t});\n\t\tthis.onValueChange.emit(val);\n\t}\n\n\tpublic onCounterChange(e): void {\n\t\tthis.counter = e;\n\t\tif(this.counter == 0) {\n\t\t\tthis.onValueChange.emit(-1);\n\t\t}\n\t}\n\n\tressendOtp(): void {\n\t\tthis.CounterDirective.first.startTimer();\n\t\tthis.onValueChange.emit(-2);\n\t}\n}","import { Directive, ElementRef, Renderer2, Input } from '@angular/core';\n\n@Directive({\n\tselector: '[numberOnly]'\n})\nexport class NumberOnly {\n\t@Input() disabledNumberOnly: boolean;\n\tconstructor(private _elRef: ElementRef, private _renderer: Renderer2) { }\n\n\tngOnInit() {\n\t\tif (!this.disabledNumberOnly) {\n\t\t\tthis._renderer.setAttribute(this._elRef.nativeElement, 'onkeypress', 'return (event.charCode >= 48 && event.charCode <= 57) || event.charCode == 0');\n\t\t}\n\t}\n}","import { NgModule,  } from '@angular/core';\nimport { OtpInputComponent } from './components/angular-otp-input.component';\nimport { KeysPipe } from './pipes/keys.pipe';\nimport { ReactiveFormsModule, FormsModule } from '@angular/forms';\nimport { CommonModule } from '@angular/common';\nimport { NumberOnly } from './directives/numberOnly.directive';\nimport { CounterDirective } from './directives/timer.directive';\n\n@NgModule({\n  declarations: [\n    OtpInputComponent,\n    KeysPipe,\n    NumberOnly,\n    CounterDirective\n  ],\n  imports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule\n  ],\n  exports: [\n    OtpInputComponent\n  ],\n  providers:[KeysPipe]\n})\nexport class AngularOtpLibModule { }\n"],"names":["Pipe","Subject","Subscription","EventEmitter","switchMap","timer","take","tap","Directive","Input","Output","FormGroup","FormControl","Component","ViewChildren","ElementRef","Renderer2","NgModule","CommonModule","FormsModule","ReactiveFormsModule"],"mappings":";;;;;;;;;;AAAA;QAEA;SAOC;;;;;QAHA,4BAAS;;;;QAAT,UAAU,KAAU;YACnB,OAAO,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAA;SACzB;;oBANDA,SAAI,SAAC;wBACL,IAAI,EAAE,MAAM;qBACZ;;QAKD,eAAC;KAPD;;;;;;ICFA;QAAA;SAUC;QAAD,cAAC;KAAA,IAAA;;;QATG,8BAAqC;;QACrC,gCAAuC;;QACvC,gCAAyB;;QACzB,yBAAe;;QACf,8BAAsB;;QACtB,6BAAoB;;QACpB,+BAAsB;;QACtB,wBAAe;;QACf,2BAAkB;;;;;;;ACTtB;QAgBI;YAAA,iBASC;YAhBO,oBAAe,GAAG,IAAIC,YAAO,EAAO,CAAC;YACrC,kBAAa,GAAGC,iBAAY,CAAC,KAAK,CAAC;YAG3C,aAAQ,GAAW,IAAI,CAAC;YACd,UAAK,GAAG,IAAIC,iBAAY,EAAU,CAAC;YAGzC,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,eAAe,CAAC,IAAI,CAC1CC,mBAAS;;;;YAAC,UAAC,EAAmB;oBAAjB,sBAAQ,EAAE,gBAAK;gBACxB,OAAAC,UAAK,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,IAAI,CACnBC,cAAI,CAAC,KAAK,CAAC,EACXC,aAAG;;;gBAAC,cAAM,OAAA,KAAI,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE,KAAK,CAAC,GAAA,EAAC,CACtC;aAAA,EACJ,CACJ,CAAC,SAAS,EAAE,CAAC;SACjB;;;;;QAED,sCAAW;;;;QAAX,UAAY,OAAsB;YAC9B,IAAI,CAAC,UAAU,EAAE,CAAC;SACrB;;;;QAEM,qCAAU;;;QAAjB;YACI,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,IAAI,CAAC,OAAO,EAAE,QAAQ,EAAE,IAAI,CAAC,QAAQ,EAAE,CAAC,CAAC;SAC/E;;;;QAED,sCAAW;;;QAAX;YACI,IAAI,CAAC,aAAa,CAAC,WAAW,EAAE,CAAC;SACpC;;oBAhCJC,cAAS,SAAC;wBACP,QAAQ,EAAE,WAAW;qBACxB;;;;;8BAKIC,UAAK;4BAELC,WAAM;;QAwBX,uBAAC;KAjCD,IAiCC;;;;;;QA7BG,2CAA6C;;;;;QAC7C,yCAA2C;;QAE3C,mCAAyB;;QACzB,oCAAwB;;QACxB,iCAA6C;;;;;;;ACdjD;QAwBC,2BAAoB,QAAkB;YAAlB,aAAQ,GAAR,QAAQ,CAAU;YAX7B,YAAO,GAAY;gBAC3B,MAAM,EAAE,CAAC;gBACT,KAAK,EAAE,CAAC;aACR,CAAC;YACQ,kBAAa,GAAG,IAAIP,iBAAY,EAAO,CAAC;YAGlD,kBAAa,GAAkB,IAAI,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;YAC9D,iBAAY,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,IAAI,EAAE,EAAE,OAAO,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;SAGnD;;;;QAEnC,oCAAQ;;;QAAf;YACC,IAAI,CAAC,OAAO,GAAG,IAAIQ,eAAS,CAAC,EAAE,CAAC,CAAA;YAChC,KAAK,IAAI,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,KAAK,EAAE,EAAE;gBACzD,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,EAAE,IAAIC,iBAAW,EAAE,CAAC,CAAA;aACtE;SACD;;;;QAEM,2CAAe;;;QAAtB;;gBACK,aAAa,GAAG,QAAQ,CAAC,cAAc,CAAC,OAAK,IAAI,CAAC,YAAc,CAAC;YACrE,IAAI,aAAa,EAAE;;oBACd,GAAG,GAAQ,aAAa,CAAC,sBAAsB,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC;gBACpE,IAAI,GAAG,IAAI,GAAG,CAAC,KAAK,EAAE;oBACrB,GAAG,CAAC,KAAK,EAAE,CAAC;iBACZ;aACD;SACD;;;;;;QAEO,0CAAc;;;;;QAAtB,UAAuB,GAAG;YACzB,OAAO,UAAQ,GAAK,CAAC;SACrB;;;;;QAED,uCAAW;;;;QAAX,UAAY,CAAC;YACZ,OAAO,IAAI,CAAC,SAAS,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;SAC7B;;;;;QAED,wCAAY;;;;QAAZ,UAAa,CAAC;YACb,OAAO,IAAI,CAAC,SAAS,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;SAC7B;;;;;QAED,+CAAmB;;;;QAAnB,UAAoB,CAAC;YACpB,OAAO,CAAC,CAAC,GAAG,KAAK,WAAW,IAAI,CAAC,CAAC,GAAG,KAAK,QAAQ,IAAI,IAAI,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC,IAAI,IAAI,CAAC,SAAS,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;SACpG;;;;;;QAED,qCAAS;;;;;QAAT,UAAU,CAAC,EAAE,UAAU;;gBAClB,GAAG,GAAG,CAAC,CAAC,OAAO,IAAI,CAAC,CAAC,QAAQ;YACjC,IAAG,GAAG,IAAI,UAAU,EAAE;gBAAE,OAAO,IAAI,CAAC;aAAE;YACtC,OAAO,KAAK,CAAC;SACb;;;;;;QAED,iCAAK;;;;;QAAL,UAAM,CAAC,EAAE,QAAgB;;gBACpB,WAAW,GAAG,IAAI,CAAC,SAAS,CAAC,UAAO,QAAQ,GAAG,CAAC,CAAE,CAAC;;gBACnD,WAAW,GAAG,IAAI,CAAC,SAAS,CAAC,UAAO,QAAQ,GAAG,CAAC,CAAE,CAAC;YACvD,IAAI,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,EAAE;gBACzB,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,CAAC;gBAC9B,OAAO;aACP;YACD,IAAI,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,EAAE;gBACxB,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,CAAC;gBAC9B,OAAO;aACP;;gBACG,WAAW,GAAG,IAAI,CAAC,mBAAmB,CAAC,CAAC,CAAC;YAC7C,IAAI,WAAW,IAAI,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,EAAE;gBACnC,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,CAAC;gBAC9B,IAAI,CAAC,YAAY,EAAE,CAAC;gBACpB,OAAO;aACP;YACD,IAAI,CAAC,CAAC,CAAC,MAAM,CAAC,KAAK,EAAE;gBACpB,OAAO;aACP;YACD,IAAI,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,EAAE;gBACzB,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC;aAC1B;YACD,IAAI,CAAC,YAAY,EAAE,CAAC;SACpB;;;;;QAED,qCAAS;;;;QAAT,UAAU,EAAE;YACX,OAAU,EAAE,SAAI,IAAI,CAAC,YAAc,CAAC;SACpC;;;;;QAED,uCAAW;;;;QAAX,UAAY,KAAK;YAChB,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;;gBAChB,GAAG,GAAQ,QAAQ,CAAC,cAAc,CAAC,KAAK,CAAC;YAC7C,IAAI,GAAG,IAAI,GAAG,CAAC,iBAAiB,EAAE;gBACjC,UAAU;;;gBAAC;oBACV,GAAG,CAAC,iBAAiB,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;iBAC5B,GAAE,CAAC,CAAC,CAAC;aACN;SACD;;;;;QAED,wCAAY;;;;QAAZ,UAAa,CAAC;;gBACT,GAAG,GAAG,MAAM,CAAC,YAAY,CAAC,CAAC,CAAC,OAAO,CAAC;;gBACpC,QAAQ,GAAG,2BAA2B,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC;YACpE,OAAO,QAAQ,IAAI,eAAe,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,IAAI,CAAC,OAAO,CAAC,aAAa,IAAI,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,KAAK,CAAC,CAAC,OAAO,IAAI,EAAE,IAAI,CAAC,CAAC,OAAO,IAAI,GAAG,CAAC,CAAC;SACxK;;;;;QAED,mCAAO;;;;QAAP,UAAQ,KAAK;;gBACR,GAAG,GAAQ,QAAQ,CAAC,cAAc,CAAC,KAAK,CAAC;YAC7C,IAAI,GAAG,EAAE;gBACR,GAAG,CAAC,KAAK,EAAE,CAAC;gBACZ,GAAG,CAAC,cAAc,GAAG,GAAG,CAAC,YAAY,GAAG,GAAG,CAAC;aAC5C;SACD;;;;QAED,wCAAY;;;QAAZ;YAAA,iBAQC;;gBAPI,GAAG,GAAG,EAAE;YACZ,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,OAAO;;;;YAAC,UAAA,CAAC;gBACvD,IAAI,KAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE;oBACnC,GAAG,IAAI,KAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC;iBACtC;aACD,EAAC,CAAC;YACH,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;SAC7B;;;;;QAEM,2CAAe;;;;QAAtB,UAAuB,CAAC;YACvB,IAAI,CAAC,OAAO,GAAG,CAAC,CAAC;YACjB,IAAG,IAAI,CAAC,OAAO,IAAI,CAAC,EAAE;gBACrB,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;aAC5B;SACD;;;;QAED,sCAAU;;;QAAV;YACC,IAAI,CAAC,gBAAgB,CAAC,KAAK,CAAC,UAAU,EAAE,CAAC;YACzC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;SAC5B;;oBArIDC,cAAS,SAAC;wBACV,QAAQ,EAAE,KAAK;wBACf,8gCAAiD;;qBAEjD;;;;oBARQ,QAAQ;;;8BAWfJ,UAAK;oCAILC,WAAM;uCACNI,iBAAY,SAAC,gBAAgB;;QA0H/B,wBAAC;KAtID,IAsIC;;;QA/HA,oCAGE;;QACF,0CAAkD;;QAClD,6CAAiD;;QACjD,oCAAmB;;QACnB,0CAA8D;;QAC9D,yCAA6F;;QAC7F,oCAAuB;;;;;QAEX,qCAA0B;;;;;;;ACxBvC;QAOC,oBAAoB,MAAkB,EAAU,SAAoB;YAAhD,WAAM,GAAN,MAAM,CAAY;YAAU,cAAS,GAAT,SAAS,CAAW;SAAK;;;;QAEzE,6BAAQ;;;QAAR;YACC,IAAI,CAAC,IAAI,CAAC,kBAAkB,EAAE;gBAC7B,IAAI,CAAC,SAAS,CAAC,YAAY,CAAC,IAAI,CAAC,MAAM,CAAC,aAAa,EAAE,YAAY,EAAE,8EAA8E,CAAC,CAAC;aACrJ;SACD;;oBAXDN,cAAS,SAAC;wBACV,QAAQ,EAAE,cAAc;qBACxB;;;;oBAJmBO,eAAU;oBAAEC,cAAS;;;yCAMvCP,UAAK;;QAQP,iBAAC;KAZD,IAYC;;;QARA,wCAAqC;;;;;QACzB,4BAA0B;;;;;QAAE,+BAA4B;;;;;;;ACPrE;QAQA;SAiBoC;;oBAjBnCQ,aAAQ,SAAC;wBACR,YAAY,EAAE;4BACZ,iBAAiB;4BACjB,QAAQ;4BACR,UAAU;4BACV,gBAAgB;yBACjB;wBACD,OAAO,EAAE;4BACPC,mBAAY;4BACZC,iBAAW;4BACXC,yBAAmB;yBACpB;wBACD,OAAO,EAAE;4BACP,iBAAiB;yBAClB;wBACD,SAAS,EAAC,CAAC,QAAQ,CAAC;qBACrB;;QACkC,0BAAC;KAjBpC;;;;;;;;;;;;;;;;"}