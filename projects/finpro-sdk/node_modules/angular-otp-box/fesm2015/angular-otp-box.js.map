{"version":3,"file":"angular-otp-box.js","sources":["ng://angular-otp-box/lib/pipes/keys.pipe.ts","ng://angular-otp-box/lib/models/setting.ts","ng://angular-otp-box/lib/directives/timer.directive.ts","ng://angular-otp-box/lib/components/angular-otp-input.component.ts","ng://angular-otp-box/lib/directives/numberOnly.directive.ts","ng://angular-otp-box/lib/angular-otp-box.module.ts"],"sourcesContent":["import { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n\tname: 'keys'\n})\nexport class KeysPipe implements PipeTransform {\n\ttransform(value: any): string[] {\n\t\treturn Object.keys(value)\n\t}\n}","export class Setting {\n    inputStyles?: { [key: string]: any };\n    wrapperStyles?: { [key: string]: any };\n    allowKeyCodes?: string[];\n    length: number;\n    numbersOnly?: boolean;\n    inputClass?: string;\n    wrapperClass?: string;\n    timer?: number;\n    btnClass?: string;\n}","import { Directive, Input, Output, EventEmitter, OnChanges, OnDestroy, SimpleChanges } from '@angular/core';\n\nimport { Subject, Observable, Subscription, timer } from 'rxjs';\nimport { switchMap, take, tap } from 'rxjs/operators';\n\n@Directive({\n    selector: '[counter]'\n})\nexport class CounterDirective implements OnChanges, OnDestroy {\n    private _counterSource$ = new Subject<any>();\n    private _subscription = Subscription.EMPTY;\n\n    @Input() counter: number;\n    interval: number = 1000;\n    @Output() value = new EventEmitter<number>();\n\n    constructor() {\n        this._subscription = this._counterSource$.pipe(\n            switchMap(({ interval, count }) =>\n                timer(0, interval).pipe(\n                    take(count),\n                    tap(() => this.value.emit(--count))\n                )\n            )\n        ).subscribe();\n    }\n\n    ngOnChanges(changes: SimpleChanges): void {\n        this.startTimer();\n    }\n\n    public startTimer() {\n        this._counterSource$.next({ count: this.counter, interval: this.interval });\n    }\n\n    ngOnDestroy(): void {\n        this._subscription.unsubscribe();\n    }\n}","import { Component, OnInit, Input, Output, EventEmitter, ViewChildren } from '@angular/core';\nimport { FormGroup, FormControl } from '@angular/forms';\nimport { KeysPipe } from '../pipes/keys.pipe';\nimport { Setting } from '../models/setting';\nimport { CounterDirective } from '../directives/timer.directive';\n\n@Component({\n\tselector: 'otp',\n\ttemplateUrl: './angular-otp-input.component.html',\n\tstyleUrls: ['./angular-otp-input.component.scss']\n})\n\nexport class OtpInputComponent implements OnInit {\n\t@Input() setting: Setting = { \n\t\tlength: 4, \n\t\ttimer: 0\n\t};\n\t@Output() onValueChange = new EventEmitter<any>();\n\t@ViewChildren(CounterDirective) CounterDirective;\n\totpForm: FormGroup;\n\tinputControls: FormControl[] = new Array(this.setting.length);\n\tcomponentKey = Math.random().toString(36).substring(2) + (new Date()).getTime().toString(36);\n\tpublic counter: number;\n\t\n\tconstructor(private keysPipe: KeysPipe) {}\n\n\tpublic ngOnInit(): void {\n\t\tthis.otpForm = new FormGroup({})\n\t\tfor (let index = 0; index < this.setting.length; index++) {\n\t\t\tthis.otpForm.addControl(this.getControlName(index), new FormControl())\n\t\t}\n\t}\n\t\n\tpublic ngAfterViewInit(): void {\n\t\tlet containerItem = document.getElementById(`c_${this.componentKey}`);\n\t\tif (containerItem) {\n\t\t\tlet ele: any = containerItem.getElementsByClassName('.otp-input')[0]\n\t\t\tif (ele && ele.focus) {\n\t\t\t\tele.focus();\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate getControlName(idx) {\n\t\treturn `ctrl_${idx}`;\n\t}\n\n\tisLeftArrow(e) {\n\t\treturn this.isKeyCode(e, 37);\n\t}\n\n\tisRightArrow(e) {\n\t\treturn this.isKeyCode(e, 39);\n\t}\n\n\tisBackspaceOrDelete(e) {\n\t\treturn e.key === \"Backspace\" || e.key === \"Delete\" || this.isKeyCode(e, 8) || this.isKeyCode(e, 46);\n\t}\n\n\tisKeyCode(e, targetCode) {\n\t\tvar key = e.keyCode || e.charCode;\n\t\tif(key == targetCode) { return true; }\n\t\treturn false;\n\t}\n\n\tkeyUp(e, inputIdx: number) {\n\t\tlet nextInputId = this.appendKey(`otp_${inputIdx + 1}`);\n\t\tlet prevInputId = this.appendKey(`otp_${inputIdx - 1}`);\n\t\tif (this.isRightArrow(e)) {\n\t\t\tthis.setSelected(nextInputId);\n\t\t\treturn;\n\t\t}\n\t\tif (this.isLeftArrow(e)) {\n\t\t\tthis.setSelected(prevInputId);\n\t\t\treturn;\n\t\t}\n\t\tlet isBackspace = this.isBackspaceOrDelete(e);\n\t\tif (isBackspace && !e.target.value) {\n\t\t\tthis.setSelected(prevInputId);\n\t\t\tthis.rebuildValue();\n\t\t\treturn;\n\t\t}\n\t\tif (!e.target.value) {\n\t\t\treturn;\n\t\t}\n\t\tif (this.isValidEntry(e)) {\n\t\t\tthis.focusTo(nextInputId);\n\t\t}\n\t\tthis.rebuildValue();\n\t}\n\n\tappendKey(id) {\n\t\treturn `${id}_${this.componentKey}`;\n\t}\n\n\tsetSelected(eleId) {\n\t\tthis.focusTo(eleId);\n\t\tlet ele: any = document.getElementById(eleId);\n\t\tif (ele && ele.setSelectionRange) {\n\t\t\tsetTimeout(() => {\n\t\t\t\tele.setSelectionRange(0, 1);\n\t\t\t}, 0);\n\t\t}\n\t}\n\n\tisValidEntry(e) {\n\t\tvar inp = String.fromCharCode(e.keyCode);\n\t\tvar isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);\n\t\treturn isMobile || /[a-zA-Z0-9-_]/.test(inp) || (this.setting.allowKeyCodes && this.setting.allowKeyCodes.includes(e.keyCode)) || (e.keyCode >= 96 && e.keyCode <= 105);\n\t}\n\n\tfocusTo(eleId) {\n\t\tlet ele: any = document.getElementById(eleId);\n\t\tif (ele) {\n\t\t\tele.focus();\n\t\t\tele.selectionStart = ele.selectionEnd = 100;\n\t\t}\n\t}\n\n\trebuildValue() {\n\t\tlet val = '';\n\t\tthis.keysPipe.transform(this.otpForm.controls).forEach(k => {\n\t\t\tif (this.otpForm.controls[k].value) {\n\t\t\t\tval += this.otpForm.controls[k].value;\n\t\t\t}\n\t\t});\n\t\tthis.onValueChange.emit(val);\n\t}\n\n\tpublic onCounterChange(e): void {\n\t\tthis.counter = e;\n\t\tif(this.counter == 0) {\n\t\t\tthis.onValueChange.emit(-1);\n\t\t}\n\t}\n\n\tressendOtp(): void {\n\t\tthis.CounterDirective.first.startTimer();\n\t\tthis.onValueChange.emit(-2);\n\t}\n}","import { Directive, ElementRef, Renderer2, Input } from '@angular/core';\n\n@Directive({\n\tselector: '[numberOnly]'\n})\nexport class NumberOnly {\n\t@Input() disabledNumberOnly: boolean;\n\tconstructor(private _elRef: ElementRef, private _renderer: Renderer2) { }\n\n\tngOnInit() {\n\t\tif (!this.disabledNumberOnly) {\n\t\t\tthis._renderer.setAttribute(this._elRef.nativeElement, 'onkeypress', 'return (event.charCode >= 48 && event.charCode <= 57) || event.charCode == 0');\n\t\t}\n\t}\n}","import { NgModule,  } from '@angular/core';\nimport { OtpInputComponent } from './components/angular-otp-input.component';\nimport { KeysPipe } from './pipes/keys.pipe';\nimport { ReactiveFormsModule, FormsModule } from '@angular/forms';\nimport { CommonModule } from '@angular/common';\nimport { NumberOnly } from './directives/numberOnly.directive';\nimport { CounterDirective } from './directives/timer.directive';\n\n@NgModule({\n  declarations: [\n    OtpInputComponent,\n    KeysPipe,\n    NumberOnly,\n    CounterDirective\n  ],\n  imports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule\n  ],\n  exports: [\n    OtpInputComponent\n  ],\n  providers:[KeysPipe]\n})\nexport class AngularOtpLibModule { }\n"],"names":[],"mappings":"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"}